{
  "hash": "c81ccfcef8c249616f02d28493700c2c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\nfilters:\n  - pyodide\n---\n\n# An Introduction to Pandas\n\n\n{{< video https://youtu.be/YiecfDcq40o >}}\n\n\n\nLet’s talk about Pandas.\n\nAnd by that, we of course mean the beautiful, glorious, intelligent…\n… open source Python library that provides powerful data structures and analysis tools.\n\n(You can judge the level of geekiness of someone fairly easily by simply making the statement “I love Pandas” and seeing if they reply “Me too, and NumPy!”)\n\nPandas is very powerful for manipulating data in large arrays (unlike some spreadsheet software…), and allows for indexing of data.  NumPy and Pandas are often used together, with NumPy used for mathematical functions applied to the data, and Pandas used to manipulate the data.\n\nAs with NumPy, there is a conventional alias under which Pandas should be imported :\n\n::: {#1cedb0eb .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\n```\n:::\n\n\n## The Pandas Dataframe\n\nOne of the most useful structures in Pandas is the Pandas DataFrame. A DataFrame is like a table with different columns (which can have names) for different data fields, and different rows for each entry in the data.\n\nImagine a table in Excel.  Only much more powerful.\n\n![](assets/2024-05-15-15-55-45.png)\n\n## Creating a new dataframe\n\n\n{{< video https://youtu.be/UWQtgQUPBY8 >}}\n\n\n\nWe have two choices when we want to create a new Pandas DataFrame :\n\n- We can create a new DataFrame and then build the DataFrame manually\n- We can read in existing data from a .csv file\n\nGiven that 99% of the time you’ll be doing the latter for real world applications, let’s just focus on that.  And it’s also really easy!\n\nPandas has a fantastic function that allows us to read in data from a .csv file, and it will automatically stuff it into a new DataFrame for us!\n\nIn one line of code!!\n\nDon’t believe me?  Observe…\n\n:::{.callout-tip}\nOne fantastic feature of pandas is that we can point to either a **local** file (one stored on our machine) or a **remote** file (one stored somewhere else - like the web).\n:::\n\nIn the example below, we are accessing a file called `input_data.csv`.\n\nIf this file was stored in the same folder as our python file, we would just do\n\n::: {#5bbdac05 .cell execution_count=2}\n``` {.python .cell-code}\ndf = pd.read_csv(\"input_data.csv\")\n```\n:::\n\n\nWe can then show the first 5 rows of the data with the `.head()` method.\n\n::: {#35f8affd .cell execution_count=3}\n``` {.python .cell-code}\ndf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Patient ID</th>\n      <th>Name</th>\n      <th>Flu Vaccine</th>\n      <th>Age</th>\n      <th>County</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>65192</td>\n      <td>Bob</td>\n      <td>Yes</td>\n      <td>42</td>\n      <td>Cornwall</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>84568</td>\n      <td>Nigel</td>\n      <td>No</td>\n      <td>27</td>\n      <td>Devon</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>93765</td>\n      <td>Florence</td>\n      <td>Yes</td>\n      <td>84</td>\n      <td>Somerset</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>97865</td>\n      <td>Martha</td>\n      <td>Yes</td>\n      <td>57</td>\n      <td>Somerset</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>12451</td>\n      <td>Simon</td>\n      <td>No</td>\n      <td>35</td>\n      <td>Somerset</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nHowever, we could also use a web location. We're going to use this method in the rest of the examples to allow us to interact with pandas dataframes in this book.\n\n```{pyodide-python}\nimport pandas as pd\n\ndf = pd.read_csv(\"https://raw.githubusercontent.com/hsma-programme/h6_1f_python_part_2/main/1f_python_programming_part_2/lecture_examples/input_data.csv\")\n\ndf.head()\n```\n\nYou can see that the outputs are identical!\n\n## The index\n\n![](assets/2024-05-15-15-57-30.png)\n\n\n## Specifying an existing column as the index\n\nIn our data, we already have a unique identifier in our data - “Patient ID”.  When we read in the .csv, we can tell Pandas that we want to set this column to be the Index (rather than creating a new one).\n\n```{pyodide-python}\nimport pandas as pd\n\ndf = pd.read_csv(\n    \"https://raw.githubusercontent.com/hsma-programme/h6_1f_python_part_2/main/1f_python_programming_part_2/lecture_examples/input_data.csv\",\n    index_col=\"Patient ID\"\n    )\n\ndf.head()\n```\n\nIMPORTANT - Pandas will check that the column you specify does truly have unique values.  If it doesn’t, it will raise an exception (error) and if you don’t catch it, the code will terminate.\n\nBe careful when importing data where multiple records refer to the same patient - patient ID would not be a unique identifier in that case.\n\n",
    "supporting": [
      "intro_to_pandas_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}